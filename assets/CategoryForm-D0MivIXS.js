import{d as h,r as _,C as N,B as R,o as w,j as F,b as I,f as a,p as S,g as n,h as r,q as V,n as j,i as q,l as T,k as d}from"./index-B8gi7TZy.js";import{u as U}from"./categoryStore-AOVoFCYg.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"form-container"},O=h({__name:"CategoryForm",setup(z){const f=F(),p=q(),s=U(),g=_(),o=N({name:"",description:""}),c=_(null),v=R(()=>c.value?"编辑分类":"添加分类"),y={name:[{required:!0,message:"请输入分类名称！"}]};w(()=>{const t=f.params.id;if(t&&typeof t=="string"){c.value=t;const e=Number(t),l=s.categories.find(i=>i.id===e);l&&Object.assign(o,l)}});const b=async t=>{try{c.value?(await s.updateCategory({id:Number(c.value),...t}),d.success("分类更新成功")):(await s.addCategory(t),d.success("分类添加成功")),p.back()}catch{d.error("保存失败")}},C=()=>{p.back()};return(t,e)=>{const l=n("a-page-header"),i=n("a-input"),u=n("a-form-item"),k=n("a-textarea"),x=n("a-button"),B=n("a-form");return T(),I("div",null,[a(l,{title:v.value,onBack:C},null,8,["title"]),S("div",M,[a(B,{ref_key:"formRef",ref:g,model:o,rules:y,layout:"vertical",onFinish:b},{default:r(()=>[a(u,{label:"分类名称",name:"name"},{default:r(()=>[a(i,{value:o.name,"onUpdate:value":e[0]||(e[0]=m=>o.name=m),placeholder:"请输入分类名称"},null,8,["value"])]),_:1}),a(u,{label:"描述",name:"description"},{default:r(()=>[a(k,{value:o.description,"onUpdate:value":e[1]||(e[1]=m=>o.description=m),placeholder:"请输入描述"},null,8,["value"])]),_:1}),a(u,null,{default:r(()=>[a(x,{type:"primary","html-type":"submit",loading:V(s).loading,block:""},{default:r(()=>e[2]||(e[2]=[j(" 保存 ",-1)])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}}),H=E(O,[["__scopeId","data-v-4f6c0579"]]);export{H as default};
