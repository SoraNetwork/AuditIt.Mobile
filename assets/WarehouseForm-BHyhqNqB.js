import{d as W,r as _,B as N,A as R,o as U,j as C,c as F,e as a,h as I,f as s,w as r,m as S,D as V,a as j,g as q,b as d}from"./index-uYOzLqeR.js";import{u as T}from"./warehouseStore-Cx_wL2Cu.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"form-container"},E=W({__name:"WarehouseForm",setup(M){const f=C(),p=j(),u=T(),v=_(),t=N({name:"",location:"",capacity:100,description:""}),i=_(null),b=R(()=>i.value?"编辑仓库":"添加仓库"),g={name:[{required:!0,message:"请输入仓库名称！"}],location:[{required:!0,message:"请输入位置！"}]};U(()=>{const o=f.params.id;if(o&&typeof o=="string"){i.value=o;const e=Number(o),c=u.warehouses.find(m=>m.id===e);c&&Object.assign(t,c)}});const y=async o=>{try{i.value?(await u.updateWarehouse({id:Number(i.value),...o}),d.success("仓库更新成功")):(await u.addWarehouse(o),d.success("仓库添加成功")),p.back()}catch{d.error("保存失败")}},h=()=>{p.back()};return(o,e)=>{const c=s("a-page-header"),m=s("a-input"),l=s("a-form-item"),k=s("a-input-number"),x=s("a-textarea"),w=s("a-button"),B=s("a-form");return q(),F("div",null,[a(c,{title:b.value,onBack:h},null,8,["title"]),I("div",D,[a(B,{ref_key:"formRef",ref:v,model:t,rules:g,layout:"vertical",onFinish:y},{default:r(()=>[a(l,{label:"仓库名称",name:"name"},{default:r(()=>[a(m,{value:t.name,"onUpdate:value":e[0]||(e[0]=n=>t.name=n),placeholder:"请输入仓库名称"},null,8,["value"])]),_:1}),a(l,{label:"位置",name:"location"},{default:r(()=>[a(m,{value:t.location,"onUpdate:value":e[1]||(e[1]=n=>t.location=n),placeholder:"请输入位置"},null,8,["value"])]),_:1}),a(l,{label:"容量",name:"capacity"},{default:r(()=>[a(k,{value:t.capacity,"onUpdate:value":e[2]||(e[2]=n=>t.capacity=n),style:{width:"100%"}},null,8,["value"])]),_:1}),a(l,{label:"描述",name:"description"},{default:r(()=>[a(x,{value:t.description,"onUpdate:value":e[3]||(e[3]=n=>t.description=n),placeholder:"请输入描述"},null,8,["value"])]),_:1}),a(l,null,{default:r(()=>[a(w,{type:"primary","html-type":"submit",loading:S(u).loading,block:""},{default:r(()=>e[4]||(e[4]=[V(" 保存 ",-1)])),_:1,__:[4]},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}}),H=A(E,[["__scopeId","data-v-cf65d613"]]);export{H as default};
