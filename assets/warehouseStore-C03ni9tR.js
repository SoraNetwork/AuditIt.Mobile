import{S as o,H as r}from"./index-BrlnX8tt.js";const h=o("warehouse",{state:()=>({warehouses:[],loading:!1,error:null}),actions:{async fetchWarehouses(){this.loading=!0,this.error=null;try{const s=await r.get("/warehouses");this.warehouses=s.data}catch(s){this.error="获取仓库列表失败: "+(s.response?.data?.message||s.message),console.error(s)}finally{this.loading=!1}},async addWarehouse(s){this.loading=!0,this.error=null;try{const e=await r.post("/warehouses",s);this.warehouses.unshift(e.data)}catch(e){throw this.error="添加仓库失败: "+(e.response?.data?.message||e.message),console.error(e),e}finally{this.loading=!1}},async updateWarehouse(s){this.loading=!0,this.error=null;try{const e=await r.put(`/warehouses/${s.id}`,s),a=this.warehouses.findIndex(t=>t.id===s.id);a!==-1&&(this.warehouses[a]=e.data)}catch(e){throw this.error="更新仓库失败: "+(e.response?.data?.message||e.message),console.error(e),e}finally{this.loading=!1}},async deleteWarehouse(s){this.loading=!0,this.error=null;try{await r.delete(`/warehouses/${s}`),this.warehouses=this.warehouses.filter(e=>e.id!==s)}catch(e){throw this.error="删除仓库失败: "+(e.response?.data?.message||e.message),console.error(e),e}finally{this.loading=!1}}}});export{h as u};
