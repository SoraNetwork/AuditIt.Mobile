import{d as W,r as _,C as N,B as C,o as R,g as U,a as F,b as a,l as I,e as s,w as r,p as S,k as V,f as q,i as T,h as m}from"./index-rdT5r4Nn.js";import{u as j}from"./warehouseStore-CE-A09F4.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"form-container"},O=W({__name:"WarehouseForm",setup(z){const f=U(),p=q(),u=j(),v=_(),t=N({name:"",location:"",capacity:100,description:""}),i=_(null),b=C(()=>i.value?"编辑仓库":"添加仓库"),g={name:[{required:!0,message:"请输入仓库名称！"}],location:[{required:!0,message:"请输入位置！"}]};R(()=>{const o=f.params.id;if(o&&typeof o=="string"){i.value=o;const e=Number(o),c=u.warehouses.find(d=>d.id===e);c&&Object.assign(t,c)}});const y=async o=>{try{i.value?(await u.updateWarehouse({id:Number(i.value),...o}),m.success("仓库更新成功")):(await u.addWarehouse(o),m.success("仓库添加成功")),p.back()}catch{m.error("保存失败")}},h=()=>{p.back()};return(o,e)=>{const c=s("a-page-header"),d=s("a-input"),l=s("a-form-item"),k=s("a-input-number"),x=s("a-textarea"),w=s("a-button"),B=s("a-form");return T(),F("div",null,[a(c,{title:b.value,onBack:h},null,8,["title"]),I("div",M,[a(B,{ref_key:"formRef",ref:v,model:t,rules:g,layout:"vertical",onFinish:y},{default:r(()=>[a(l,{label:"仓库名称",name:"name"},{default:r(()=>[a(d,{value:t.name,"onUpdate:value":e[0]||(e[0]=n=>t.name=n),placeholder:"请输入仓库名称"},null,8,["value"])]),_:1}),a(l,{label:"位置",name:"location"},{default:r(()=>[a(d,{value:t.location,"onUpdate:value":e[1]||(e[1]=n=>t.location=n),placeholder:"请输入位置"},null,8,["value"])]),_:1}),a(l,{label:"容量",name:"capacity"},{default:r(()=>[a(k,{value:t.capacity,"onUpdate:value":e[2]||(e[2]=n=>t.capacity=n),style:{width:"100%"}},null,8,["value"])]),_:1}),a(l,{label:"描述",name:"description"},{default:r(()=>[a(x,{value:t.description,"onUpdate:value":e[3]||(e[3]=n=>t.description=n),placeholder:"请输入描述"},null,8,["value"])]),_:1}),a(l,null,{default:r(()=>[a(w,{type:"primary","html-type":"submit",loading:S(u).loading,block:""},{default:r(()=>e[4]||(e[4]=[V(" 保存 ",-1)])),_:1,__:[4]},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}}),H=E(O,[["__scopeId","data-v-cf65d613"]]);export{H as default};
