import{d as N,r as V,j as z,z as O,o as R,c as _,k as v,i as T,l as p,a as j,e,f as s,h as A,w as a,C as i,t as o,g as l}from"./index-CddxdGKo.js";import{u as E}from"./itemStore-DS5NscXt.js";import{u as M}from"./auditLogStore-BF5hOTbF.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:1,class:"loading-container"},F={key:2,class:"page-container"},G=N({__name:"ItemDetails",setup(H){const k=z(),S=j(),f=E(),u=M(),g=V(!0),d=k.params.id,t=O(()=>f.items.find(n=>n.id===d));R(async()=>{t.value||await f.fetchItems({id:d}),await u.fetchLogs({itemId:d}),g.value=!1});const b=n=>{switch(n){case"InStock":return"success";case"LoanedOut":return"warning";case"Disposed":return"error";default:return"default"}},w=n=>{switch(n){case"InStock":return"在库";case"LoanedOut":return"已借出";case"Disposed":return"已处置";default:return"未知"}};return(n,c)=>{const y=s("a-page-header"),D=s("a-spin"),r=s("a-descriptions-item"),I=s("a-badge"),h=s("a-descriptions"),x=s("a-list-item-meta"),L=s("a-list-item"),C=s("a-list"),B=s("a-empty");return l(),_("div",null,[t.value?(l(),v(y,{key:0,title:t.value.itemDefinition?.name,onBack:c[0]||(c[0]=()=>p(S).back())},null,8,["title"])):T("",!0),g.value?(l(),_("div",q,[e(D,{size:"large"})])):t.value?(l(),_("div",F,[e(h,{bordered:"",column:1},{default:a(()=>[e(r,{label:"短ID"},{default:a(()=>[i(o(t.value.shortId),1)]),_:1}),e(r,{label:"状态"},{default:a(()=>[e(I,{status:b(t.value.status),text:w(t.value.status)},null,8,["status","text"])]),_:1}),e(r,{label:"仓库"},{default:a(()=>[i(o(t.value.warehouse?.name),1)]),_:1}),e(r,{label:"入库日期"},{default:a(()=>[i(o(new Date(t.value.entryDate).toLocaleString()),1)]),_:1}),e(r,{label:"最后更新"},{default:a(()=>[i(o(new Date(t.value.lastUpdated).toLocaleString()),1)]),_:1})]),_:1}),c[1]||(c[1]=A("h3",{style:{"margin-top":"24px"}},"操作历史",-1)),e(C,{loading:p(u).loading,"data-source":p(u).logs,size:"small"},{renderItem:a(({item:m})=>[e(L,null,{default:a(()=>[e(x,null,{title:a(()=>[i(o(m.action)+" - by "+o(m.user),1)]),description:a(()=>[i(o(new Date(m.timestamp).toLocaleString()),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["loading","data-source"])])):(l(),v(B,{key:3}))])}}}),W=U(G,[["__scopeId","data-v-def4ecb9"]]);export{W as default};
