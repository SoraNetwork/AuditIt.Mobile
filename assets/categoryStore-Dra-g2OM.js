import{O as o,P as r}from"./index-BSclxPQm.js";const n=o("category",{state:()=>({categories:[],loading:!1,error:null}),actions:{async fetchCategories(){this.loading=!0,this.error=null;try{const s=await r.get("/categories");this.categories=s.data}catch(s){this.error="获取分类列表失败: "+(s.response?.data?.message||s.message),console.error(s)}finally{this.loading=!1}},async addCategory(s){this.loading=!0,this.error=null;try{const e=await r.post("/categories",s);this.categories.unshift(e.data)}catch(e){throw this.error="添加分类失败: "+(e.response?.data?.message||e.message),console.error(e),e}finally{this.loading=!1}},async updateCategory(s){this.loading=!0,this.error=null;try{const e=await r.put(`/categories/${s.id}`,s),t=this.categories.findIndex(a=>a.id===s.id);t!==-1&&(this.categories[t]=e.data)}catch(e){throw this.error="更新分类失败: "+(e.response?.data?.message||e.message),console.error(e),e}finally{this.loading=!1}},async deleteCategory(s){this.loading=!0,this.error=null;try{await r.delete(`/categories/${s}`),this.categories=this.categories.filter(e=>e.id!==s)}catch(e){throw this.error="删除分类失败: "+(e.response?.data?.message||e.message),console.error(e),e}finally{this.loading=!1}}}});export{n as u};
