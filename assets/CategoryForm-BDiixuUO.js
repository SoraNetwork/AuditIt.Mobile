import{d as B,r as _,A as N,z as w,o as R,j as F,c as I,e as a,h as S,f as n,w as r,l as V,C as j,a as T,g as U,b as d}from"./index-CddxdGKo.js";import{u as q}from"./categoryStore-D_9Faff2.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"form-container"},E=B({__name:"CategoryForm",setup(M){const f=F(),p=T(),s=q(),g=_(),o=N({name:"",description:""}),c=_(null),v=w(()=>c.value?"编辑分类":"添加分类"),y={name:[{required:!0,message:"请输入分类名称！"}]};R(()=>{const t=f.params.id;if(t&&typeof t=="string"){c.value=t;const e=Number(t),l=s.categories.find(i=>i.id===e);l&&Object.assign(o,l)}});const b=async t=>{try{c.value?(await s.updateCategory({id:Number(c.value),...t}),d.success("分类更新成功")):(await s.addCategory(t),d.success("分类添加成功")),p.back()}catch{d.error("保存失败")}},C=()=>{p.back()};return(t,e)=>{const l=n("a-page-header"),i=n("a-input"),u=n("a-form-item"),k=n("a-textarea"),x=n("a-button"),h=n("a-form");return U(),I("div",null,[a(l,{title:v.value,onBack:C},null,8,["title"]),S("div",A,[a(h,{ref_key:"formRef",ref:g,model:o,rules:y,layout:"vertical",onFinish:b},{default:r(()=>[a(u,{label:"分类名称",name:"name"},{default:r(()=>[a(i,{value:o.name,"onUpdate:value":e[0]||(e[0]=m=>o.name=m),placeholder:"请输入分类名称"},null,8,["value"])]),_:1}),a(u,{label:"描述",name:"description"},{default:r(()=>[a(k,{value:o.description,"onUpdate:value":e[1]||(e[1]=m=>o.description=m),placeholder:"请输入描述"},null,8,["value"])]),_:1}),a(u,null,{default:r(()=>[a(x,{type:"primary","html-type":"submit",loading:V(s).loading,block:""},{default:r(()=>e[2]||(e[2]=[j(" 保存 ",-1)])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}}),H=z(E,[["__scopeId","data-v-4f6c0579"]]);export{H as default};
